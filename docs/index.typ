#import "lib/gost.typ": init

#show: init

= Цель работы

Изучить принципы построения консольных приложений, применив на практике знания базовых синтаксических конструкций языка C++ и объектно-ориентированного программирования.

Закрепить знания по теме: Классы, конструкторы и деструкторы, права доступа. Операторные функции в пространстве имен и как члены класса. Стандартная библиотека С++. Библиотека ввода-вывода.

= Задание (Вариант 5)

Реализовать шаблон класса, содержащего:
- массив данных (вектор), заполненный случайными числами в диапазоне m1=-10, m2=10
- конструктор или метод-сеттор принимающий исходные данные
- методы, обеспечивающие выполнение действий с использованием обобщенных алгоритмов, объектов-функций и предикатов
- обеспечить вывод результатов в отформатированном виде после выполнения каждого действия
- продемонстрировать работу с объектами класса для различных типов данных (не менее 3-х различных типов)

Действия согласно варианта 5:
1. Умножить все элементы массива на 2
2. Заменить все элементы, абсолютное значение которых больше 10, на 0
3. Удалить из массива все значения, равные 0

= Выполнение индивидуального задания

== Описание решения

Для выполнения задания был разработан шаблонный класс `ArrayProcessor<T>`, который позволяет работать с различными типами данных (int, double, float).

*Основные компоненты класса:*

1. *Приватные поля:*
   - `std::vector<T> data` - контейнер для хранения элементов массива
   - `T m1, m2` - границы диапазона случайных чисел

2. *Конструктор:* принимает минимальное и максимальное значения диапазона, а также размер массива. Использует условную компиляцию (`if constexpr`) для выбора правильного генератора случайных чисел в зависимости от типа данных (целочисленный или вещественный).

3. *Методы обработки данных:*
   - `multiplyByTwo()` - использует алгоритм `std::transform` с лямбда-функцией для умножения всех элементов на 2
   - `replaceAbsGreaterThan10()` - использует `std::transform` с условием для замены элементов
   - `removeZeros()` - использует комбинацию `std::remove_if` и `erase` для удаления нулевых элементов
   - `print()` - форматированный вывод массива
   - `processAll()` - выполняет все операции последовательно

== Листинг программы

ArrayProcessor.hpp

#raw(read("../src/ArrayProcessor.hpp"), lang: "cpp", block: true)

ArrayProcessor.cpp

#raw(read("../src/ArrayProcessor.cpp"), lang: "cpp", block: true)

#pagebreak()

main.cpp

#raw(read("../src/main.cpp"), lang: "cpp", block: true)

== Использованные обобщенные алгоритмы STL

В программе использованы следующие алгоритмы стандартной библиотеки C++:

1. *`std::generate`* - для заполнения вектора случайными числами в конструкторе класса. Принимает пару итераторов и функтор-генератор, который вызывается для каждого элемента.

2. *`std::transform`* - универсальный алгоритм для применения функции к каждому элементу диапазона. Используется дважды:
   - В методе `multiplyByTwo()` - для умножения всех элементов на 2
   - В методе `replaceAbsGreaterThan10()` - для условной замены элементов на 0

3. *`std::remove_if`* - алгоритм удаления элементов по предикату. В методе `removeZeros()` используется совместно с методом `erase()` контейнера (идиома erase-remove). Алгоритм перемещает элементы, не удовлетворяющие предикату, в начало диапазона и возвращает новый конец.

4. *`std::uniform_int_distribution`* и *`std::uniform_real_distribution`* - генераторы случайных чисел с равномерным распределением для целых и вещественных типов соответственно.

*Использование лямбда-функций и предикатов:*

- Все алгоритмы используют лямбда-выражения для определения логики обработки элементов
- Применена условная компиляция `if constexpr` для выбора правильной реализации в зависимости от типа данных
- Используется автоматический вывод типов (`auto`) для упрощения кода

Такой подход соответствует современному стилю программирования на C++ и демонстрирует мощь стандартной библиотеки.

= Скриншоты работы программы

Программа была протестирована для трех типов данных: `int`, `double`, и `float`.

#figure(
  image("../images/screenshots/screenshot_int.png"),
  caption: [Результаты работы программы с типом int]
)

#figure(
  image("../images/screenshots/screenshot_double.png"),
  caption: [Результаты работы программы с типом double]
)

#figure(
  image("../images/screenshots/screenshot_float.png"),
  caption: [Результаты работы программы с типом float]
)

= Выводы

В ходе выполнения лабораторной работы были достигнуты следующие результаты:

1. Изучена стандартная библиотека C++: успешно применены обобщенные алгоритмы `std::transform`, `std::generate`, `std::remove_if` для обработки данных.

2. Реализован шаблонный класс: класс `ArrayProcessor<T>` демонстрирует принципы обобщенного программирования и может работать с различными типами данных (int, double, float).

3. Применены современные возможности C++: использованы лямбда-функции, условная компиляция (`if constexpr`), генераторы случайных чисел из библиотеки `<random>`.

4. Корректность реализации: программа успешно выполняет все требуемые операции для трех различных типов данных, что подтверждает универсальность шаблонного подхода.


